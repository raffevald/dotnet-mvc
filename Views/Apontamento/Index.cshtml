@model dotnet_mvc.Models.Apontamento


@{
  ViewData["Title"] = "Apontamentos";
}

@section Scripts {
  <script>
    var componetAtividadesByStream = document.getElementsByClassName('componetAtividadesByStream');
    const LoadingAtividadesByStream = ( idStream ) => {
      var html = '<option value="0">Selecione uma Atividade</option>';
      $.getJSON(`api/atividades/byStream/${idStream}`, function (data) {
        $(data?.dbAtividadesByStream).each(function () {
          html += '<option value="'+this.id+'">'+this.nome+'</option>'
        });
          $("#componetAtividadesByStream").html(html);
      });
    }
  </script>
}


<div class="form-container">
  <form>
    <div class="form-group">
      <label for="inputData">Data: </label>
      <input type="date" class="form-control" id="inputData" placeholder="">
    </div>

    <div class="form-group">
      <label for="exampleInputPassword1">Selecione a stream: </label>
      <select asp-for="@Model.SelectedStreamId"  onchange="LoadingAtividadesByStream(this.value)" class="form-control">
        <option value="">
          Selecione uma Stream 
        </option>    
        @foreach (var item in ViewBag.Streans) {
          <option value="@item.id">
            @item.nome 
          </option>                  
        }
      </select>
    </div>

    <div class="form-group componetAtividadesByStream">
      <label for="inputAtividades">Selecione a atividades: </label>
      <select asp-for="@Model.SelectedAtividadesId" id="componetAtividadesByStream" class="form-control">
        <option value="0">Selecione uma Atividade</option>
      </select>
    </div>

    <div class="form-group">
      <label for="exampleInputPassword1">Selecione a fase: </label>
      <select asp-for="@Model.SelectedFaseId"  class="form-control">
        <option value="">
          Selecione uma fase 
        </option>    
        @foreach (var item in ViewBag.Fases) {
          <option value="@item.id">
            @item.nome 
          </option>                  
        }
      </select>
    </div>

    <div class="form-group">
      <label for="inputSelectHoras">Selecione a quantidade de horas: </label>
      <select asp-for="@Model.horasTrabalhada"  class="form-control">
        <option value="">
          Selecione uma hora 
        </option>    
        @foreach (var item in ViewBag.ScheduleNotes) {
          <option value="@item.value">
            @item.Horario 
          </option>                  
        }
      </select>
    </div>

    <div class="form-group">
      <label for="inputObservacao">Observacao</label>
      <input class="form-control" id="inputObservacao" placeholder="Obeservação">
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
